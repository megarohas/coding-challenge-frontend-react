(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{40:function(e,t,n){e.exports=n(75)},45:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(14),c=n.n(i),o=(n(45),n(2)),s=n(3),u=n(5),p=n(4),l=n(6),d=n(1),f=n(29),h=f.default,g=(f.css,f.injectGlobal,f.keyframes,f.ThemeProvider,h),m=n(32),v=n(39),b=999999999;function y(e){return e.json().then(function(t){return t.isError=e.isError,t}).catch(function(e){return e})}function _(e,t,n){var r="GET"===t?{}:{body:JSON.stringify(n)};return new Promise(function(n,a){var i=setTimeout(function(){a(new Error("Request timed out"))},b);return fetch(e,Object(v.a)({},{method:t,credentials:"same-origin",mode:"cors",headers:new Headers({"Access-Control-Allow-Origin":"*",Accept:"application/json","Content-Type":"application/json; charset=UTF-8"})},r)).then(function(e){return clearTimeout(i),e}).then(function(e){return function(e,t,n){return e.status>=200&&e.status<300?(e.isError=!1,e):(e.isError=!0,e)}(e)}).then(y).then(function(e){var t=e.isError,r=Object(m.a)(e,["isError"]);t?a(r.error):n(r)}).catch(function(e){return a(e)})})}function j(e){return _(e,"GET",{})}function O(){var e=Object(d.a)(["\n  width: 100px;\n  height: 100px;\n  margin-right: 15px;\n  min-width: 100px;\n  min-height: 100px;\n"]);return O=function(){return e},e}function x(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n"]);return x=function(){return e},e}function E(){var e=Object(d.a)(["\n  display: flex;\n  padding: 20px 10px;\n  border: 3px solid black;\n  margin-bottom: 20px;\n"]);return E=function(){return e},e}var w=g.div(E()),k=g.div(x()),P=g.img(O()),A=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.case,t=new Date(1e3*e.occurred_at);return r.createElement(w,null,r.createElement(P,{src:e.thumbnail_img,alt:"N/A"}),r.createElement(k,null,r.createElement("div",null,r.createElement("a",{href:"/case/".concat(e.id)},"Case: ".concat(e.title)),r.createElement("div",null,"Desc: ".concat(e.description))),r.createElement("div",{style:{marginTop:"10px"}},"".concat(t.toDateString()," - ").concat(e.address))))}}]),t}(r.PureComponent);A.defaultProps={case:{title:"",description:"",id:0,thumbnail_img:"",address:"",occurred_at:0}};var C=A,S=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.createElement(r.Fragment,null,this.props.cases.map(function(e){return r.createElement(C,{case:e,key:"case_list_item_".concat(e.id)})}))}}]),t}(r.PureComponent);S.defaultProps={cases:[]};var q=S;function D(){var e=Object(d.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  font-size: 25px;\n  margin-bottom: 20px;\n"]);return D=function(){return e},e}var T=g.div(D()),I=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.createElement(T,null,"Total cases: ".concat(this.props.case_count))}}]),t}(r.PureComponent);I.defaultProps={case_count:0};var z=I;function F(){var e=Object(d.a)(["\n  color:","\n  background-color:","\n  cursor: ","\n  box-shadow: ","\n  border: 3px solid black;\n  font-family: inherit;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 5px 8px;\n  font-size: 20px;\n  user-select: none;\n  &:active {\n    background-color: black;\n    box-shadow: 0px 0px 0px rgba(0, 0, 0, 1);\n    color: white;\n  }\n"]);return F=function(){return e},e}var N=g.div(F(),function(e){return e.inActive?"white;":"black;"},function(e){return e.inActive?"black;":"white;"},function(e){return e.inActive?"not-allowed;":"pointer;"},function(e){return e.inActive?"none":"3px 3px 0px rgba(0, 0, 0, 1);"}),M=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.createElement(N,{inActive:this.props.inActive,onClick:function(){e.props.doAction()}},this.props.value)}}]),t}(r.PureComponent);M.defaultProps={value:"",doAction:function(){},inActive:!1};var B=M;n(50);function G(){var e=Object(d.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 20%;\n"]);return G=function(){return e},e}function R(){var e=Object(d.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 20px;\n"]);return R=function(){return e},e}function U(){var e=Object(d.a)(["\n  display: flex;\n  width: ",";\n  padding: 3px 10px;\n  border: 3px solid black;\n  font-family: inherit;\n  font-size: 20px;\n  outline: none;\n  margin-left: 5px;\n"]);return U=function(){return e},e}function J(){var e=Object(d.a)(["\n  display: flex;\n  width: ",";\n  padding: 5px 10px;\n  border: 3px solid black;\n  font-family: inherit;\n  font-size: 20px;\n  outline: none;\n"]);return J=function(){return e},e}var L=g.input(J(),function(e){return e.width}),W=g.input(U(),function(e){return e.width}),H=g.div(R()),K=g.div(G()),Y=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={query:n.props.query,occurred_after:n.props.occurred_after,occurred_before:n.props.occurred_before},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.createElement(H,null,r.createElement(L,{width:"40%",value:this.state.query,placeholder:"Search case descriptions",onChange:function(t){return e.setState({query:t.target.value})}}),r.createElement(K,null,"From",r.createElement(W,{width:"80%",type:"date",onChange:function(t){t=t||new Date;var n=Date.parse(t.target.value).toString().substr(0,Date.parse(t.target.value).toString().length-3);e.setState({occurred_after:n})}})),r.createElement(K,null,"To",r.createElement(W,{width:"80%",type:"date",onChange:function(t){t=t||new Date;var n=Date.parse(t.target.value).toString().substr(0,Date.parse(t.target.value).toString().length-3);e.setState({occurred_before:n})}})),r.createElement(B,{value:"Find Cases",doAction:function(){e.props.findCases({query:e.state.query,occurred_after:e.state.occurred_after,occurred_before:e.state.occurred_before})}}))}}]),t}(r.PureComponent);Y.defaultProps={query:"",occurred_after:"0",occurred_before:"0",findCases:function(){}};var Z=Y;function $(){var e=Object(d.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 25px;\n  margin-bottom: 100px;\n"]);return $=function(){return e},e}var Q=g.div($()),V=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"renderPage",value:function(e){return r.createElement(B,{inActive:e.page===this.props.page,value:e.page.toString(),doAction:function(){e.setPage(e.page)}})}},{key:"generateIndexes",value:function(){return 0===this.props.total_pages?[]:1===this.props.total_pages?[1]:2===this.props.total_pages?[1,2]:3===this.props.total_pages?[1,2,3]:this.props.total_pages===this.props.page?[this.props.page-2,this.props.page-1,this.props.page]:1===this.props.page?[this.props.page,this.props.page+1,this.props.page+2]:[this.props.page-1,this.props.page,this.props.page+1]}},{key:"renderPages",value:function(){var e=this;new Array(3).fill(3);return this.generateIndexes().map(function(t){return r.createElement("div",{key:t}," ",e.renderPage({page:t,total_pages:e.props.total_pages,setPage:e.props.setPage}))})||[]}},{key:"render",value:function(){var e=this;return r.createElement(Q,null,r.createElement(B,{inActive:1===this.props.page,value:"<< First",doAction:function(){e.props.setPage(1)}}),r.createElement(B,{inActive:1===this.props.page,value:"< Prev",doAction:function(){e.props.page-1>=1&&e.props.setPage(e.props.page-1)}}),this.renderPages(),r.createElement(B,{inActive:this.props.page===this.props.total_pages,value:"Next >",doAction:function(){e.props.page+1<=e.props.total_pages&&e.props.setPage(e.props.page+1)}}),r.createElement(B,{inActive:this.props.page===this.props.total_pages,value:"Last >>",doAction:function(){e.props.setPage(e.props.total_pages)}}))}}]),t}(r.PureComponent),X=n(37);function ee(e){var t=e.per_page*e.page-1,n=e.per_page*e.page-e.per_page;return e.cases.filter(function(e,r){return function(e){return e<=t&&e>=n}(r)})}var te=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={cases:[],all_cases:[],per_page:5,total_pages:1,query:"",occurred_before:"",occurred_after:"",page:1,proximity:"52.517038,13.401267",incident_type:"theft",is_loading:!0,is_error:!1},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"getCases",value:function(e){var t,n=this;this.setState({is_loading:!0}),j("https://bikewise.org:443/api/v2/incidents?".concat((t=e,Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")))).then(function(e){var t,r,a=(t=e.incidents,Object(X.a)(t).filter(function(e){return null!=e.title}).map(function(e){return{title:e.title||"",description:e.description||"",id:e.id||"",thumbnail_img:e.media.image_url_thumb||"/no_img.png",occurred_at:parseInt(e.occurred_at)||0,address:e.address||""}}));n.setState({is_loading:!1,total_pages:(r={cases:a,per_page:n.state.per_page},Math.ceil(r.cases.length/r.per_page)),cases:ee({cases:a,page:n.state.page,per_page:n.state.per_page}),all_cases:a})}).catch(function(e){n.setState({is_error:!0})})}},{key:"componentDidMount",value:function(){this.getCases({query:"",per_page:1e18,occurred_before:"",occurred_after:"",page:1,proximity:this.state.proximity,incident_type:this.state.incident_type})}},{key:"render",value:function(){var e=this;return r.createElement(r.Fragment,null,r.createElement(Z,{query:this.state.query,occurred_after:this.state.occurred_after,occurred_before:this.state.occurred_before,findCases:function(t){var n=t.query,r=t.occurred_after,a=t.occurred_before;e.setState({query:n,occurred_after:r,occurred_before:a,page:1},function(){return e.getCases({query:e.state.query,per_page:1e18,occurred_before:e.state.occurred_before,occurred_after:e.state.occurred_after,page:1,proximity:e.state.proximity,incident_type:e.state.incident_type})})}}),this.state.is_error?r.createElement("div",null,"Error "):this.state.is_loading?r.createElement("div",null,"Loading ... "):0==this.state.all_cases.length?r.createElement("div",null,"No results"):r.createElement(r.Fragment,null,r.createElement(z,{case_count:this.state.all_cases.length}),r.createElement(q,{cases:this.state.cases}),r.createElement(V,{page:this.state.page,total_pages:this.state.total_pages,setPage:function(t){return e.setState({page:t,cases:ee({cases:e.state.all_cases,page:t,per_page:e.state.per_page})})}})))}}]),t}(r.PureComponent);function ne(){var e=Object(d.a)(["\n  height: 60px;\n"]);return ne=function(){return e},e}function re(){var e=Object(d.a)(["\n  font-size: 30px;\n"]);return re=function(){return e},e}function ae(){var e=Object(d.a)(["\n  margin-bototm: -20px;\n  font-size: 55px;\n"]);return ae=function(){return e},e}function ie(){var e=Object(d.a)(["\n  margin-left: 20px;\n"]);return ie=function(){return e},e}function ce(){var e=Object(d.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  color: black;\n  text-decoration: none;\n"]);return ce=function(){return e},e}var oe=g.a(ce()),se=g.div(ie()),ue=g.div(ae()),pe=g.div(re()),le=g.img(ne()),de=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.createElement(oe,{href:"/"},r.createElement(le,{src:"/fav.ico"}),r.createElement(se,null,r.createElement(ue,null,"Police Department of Berlin"),r.createElement(pe,null,"Stolen bykes")))}}]),t}(r.PureComponent),fe=n(33),he=n.n(fe);function ge(){var e=Object(d.a)(["\n  width: 100%;\n  height: 300px;\n"]);return ge=function(){return e},e}function me(){var e=Object(d.a)(["\n  width: 100%;\n  margin-left: 30px;\n"]);return me=function(){return e},e}function ve(){var e=Object(d.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n"]);return ve=function(){return e},e}function be(){var e=Object(d.a)(["\n  width: 100%;\n  display: flex;\n  align-items: flex-start;\n  justify-content: center;\n  height: 300px;\n  margin-top: 30px;\n"]);return be=function(){return e},e}function ye(){var e=Object(d.a)(["\n  width: 100%;\n"]);return ye=function(){return e},e}function _e(){var e=Object(d.a)(["\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  background-color: red;\n  opacity: 0.5;\n"]);return _e=function(){return e},e}function je(){var e=Object(d.a)(["\n  margin-bottom: 100px;\n"]);return je=function(){return e},e}var Oe=g.div(je()),xe=g.div(_e()),Ee=g.img(ye()),we=g.div(be()),ke=g.div(ve()),Pe=g.div(me()),Ae=g.div(ge()),Ce=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={title:"",address:"",description:"",occurred_at:"",img:"",coordinates:[52.517038,13.401267],is_loaded:!1,is_error:!1},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;j("https://bikewise.org:443/api/v2/incidents/".concat(t)).then(function(n){var r=new Date(1e3*n.incident.occurred_at);e.setState({title:n.incident.title,address:n.incident.address,description:n.incident.description,occurred_at:r.toDateString(),img:n.incident.media.image_url}),j("https://bikewise.org:443/api/v2/locations?proximity_square=100&incident_type=theft&proximity=52.517038,13.401267").then(function(n){n.features.filter(function(e){return e.properties.id==t}).forEach(function(t){e.setState({coordinates:t.geometry.coordinates.reverse()})})})})}},{key:"renderGoogleMap",value:function(){return r.createElement(Ae,null,r.createElement(he.a,{bootstrapURLKeys:{key:"AIzaSyDaxTbb824BrjJMUfBeCc5Cxv6sbuwYnhs"},center:this.state.coordinates,defaultZoom:11},r.createElement(xe,{lat:this.state.coordinates[0],lng:this.state.coordinates[1],text:""})))}},{key:"render",value:function(){return r.createElement(Oe,null,this.renderGoogleMap(),r.createElement("h1",null,this.state.title),r.createElement("h3",null,"Stolen ".concat(this.state.occurred_at," at ").concat(this.state.address)),r.createElement(ke,null,r.createElement(we,null,r.createElement(Ee,{src:this.state.img,alt:"N/A"})),r.createElement(Pe,null,r.createElement("h1",null,"DESCRIPTION OF INCEDENT"),r.createElement("h3",null,this.state.description))))}}]),t}(r.PureComponent);Ce.defaultProps={match:{params:{id:""}},params:{id:""},id:""};var Se=Ce,qe=n(34),De=n(12);function Te(){var e=Object(d.a)(["\n  padding: 0% 10%;\n"]);return Te=function(){return e},e}var Ie=g.div(Te()),ze=r.createElement("div",null,r.createElement(qe.a,null,r.createElement(De.a,{path:"/",exact:!0,component:te}),r.createElement(De.a,{path:"/case/:id",component:Se}))),Fe=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.createElement(Ie,null,r.createElement(de,null),ze)}}]),t}(r.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(Fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[40,1,2]]]);
//# sourceMappingURL=main.110b97f3.chunk.js.map